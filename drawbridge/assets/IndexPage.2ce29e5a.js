import{c as y,h as v,Q as d}from"./QBtn.d74e7976.js";import{e as a,c as u,h as _,f as h,j as C,D as $,g as k,_ as w,G as O,I as l,J as P,K as Q,U as p,O as s,L as g}from"./index.809ca425.js";import{a as f}from"./axios.f1f32898.js";var R=y({name:"QPage",props:{padding:Boolean,styleFn:Function},setup(e,{slots:n}){const{proxy:{$q:r}}=k(),t=h(C,a);if(t===a)return console.error("QPage needs to be a deep child of QLayout"),a;if(h($,a)===a)return console.error("QPage needs to be child of QPageContainer"),a;const c=u(()=>{const i=(t.header.space===!0?t.header.size:0)+(t.footer.space===!0?t.footer.size:0);if(typeof e.styleFn=="function"){const q=t.isContainer.value===!0?t.containerHeight.value:r.screen.height;return e.styleFn(i,q)}return{minHeight:t.isContainer.value===!0?t.containerHeight.value-i+"px":r.screen.height===0?i!==0?`calc(100vh - ${i}px)`:"100vh":r.screen.height-i+"px"}}),o=u(()=>`q-page${e.padding===!0?" q-layout-padding":""}`);return()=>_("main",{class:o.value,style:c.value},v(n.default))}});const S=O({name:"IndexPage",data(){return{fqdn:localStorage.getItem("fqdn"),isWaitingResponse:!1,isOpen:!1}},mounted(){this.getGateStatus()},methods:{set_fqdn(){localStorage.setItem("fqdn",this.$refs.fqdn_input.value),this.fqdn=this.$refs.fqdn_input.value},getGateStatus(){f.request("https://"+this.fqdn+"/open",{method:"GET"}).then(e=>{console.log("Gate is open: ",e.data.connected),this.isOpen=e.data.connected}).catch(e=>console.log("Error loading gate",e))},open(e){this.isWaitingResponse=!0,f.request("https://"+this.fqdn+"/open",{method:"POST",data:e}).then(n=>{console.log("Success opening gate",n),this.isWaitingResponse=!1,this.isOpen=!0}).catch(n=>console.log("Error opening gate",n))}}}),b={key:0},x=s("div",{class:"row",style:{"padding-top":"10rem"}},[s("h3",null,"Please set domain name.")],-1),G={class:"row"},I={type:"text",ref:"fqdn_input"},W={key:1},B={key:0,class:"row justify-center"},j=s("h4",null,"Gate is Open",-1),F=[j],E={key:1,class:"row justify-center"},H=s("h4",null,"Gate is Closed",-1),K=[H],z={class:"row"},L={class:"row"};function N(e,n,r,t,m,c){return l(),P(R,{class:"flex justify-center item-start"},{default:Q(()=>[e.fqdn?(l(),p("div",W,[e.isOpen?(l(),p("div",B,F)):(l(),p("div",E,K)),s("div",z,[g(d,{class:"q-ma-lg q-px-lg q-py-md",loading:e.isWaitingResponse,color:"warning",label:"Open 1m",onClick:n[1]||(n[1]=o=>e.open(60))},null,8,["loading"]),g(d,{class:"q-ma-lg q-px-lg q-py-md",loading:e.isWaitingResponse,color:"warning",label:"Open 10m",onClick:n[2]||(n[2]=o=>e.open(600))},null,8,["loading"])]),s("div",L,[g(d,{class:"q-ma-lg q-px-lg q-py-md",loading:e.isWaitingResponse,color:"warning",label:"Open 30m",onClick:n[3]||(n[3]=o=>e.open(1800))},null,8,["loading"]),g(d,{class:"q-ma-lg q-px-lg q-py-md",loading:e.isWaitingResponse,color:"warning",label:"Open 60m",onClick:n[4]||(n[4]=o=>e.open(3600))},null,8,["loading"])])])):(l(),p("div",b,[x,s("div",G,[s("input",I,null,512),s("button",{onClick:n[0]||(n[0]=(...o)=>e.set_fqdn&&e.set_fqdn(...o))},"Save domain name")])]))]),_:1})}var J=w(S,[["render",N]]);export{J as default};
